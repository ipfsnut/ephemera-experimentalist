# Ephemera Platform Vision

## Core Architecture

1. Platform Layer
- Dashboard showing available experiments
- Global state for experiment selection and status
- Shared components library:
  - Trial display
  - Response collection
  - Progress indicators
- Common styling and theming

2. Experiment Framework
- Standard experiment lifecycle:
  - Configuration
  - Trial generation
  - Response handling
  - Data collection
  - Results processing
- Base experiment class with:
  - Trial management
  - Timing controls
  - Data validation
  - State transitions
- Shared utilities:
  - Random sequence generation
  - Timing functions
  - Data formatting
  - Export tools

3. Individual Experiments
NST (Number Switching Task) Implementation:
- Configuration:
  - Difficulty levels
  - Key mappings
  - Trial counts
  - Timing parameters
- Trial Structure:
  - Stimulus generation
  - Response validation
- Data Collection:
  - Response times
  - Accuracy

## API Structure
/api/platform/
- /status - Platform status
- /experiments - List available experiments
- /settings - Global platform settings

/api/experiments/
- /:experimentId/config - Get/update experiment config
- /:experimentId/trials - Trial management
- /:experimentId/results - Results storage and retrieval

/api/data/
- /export - Data export endpoints
- /analysis - Analysis endpoints


graph TB
    MarkovChain -->|generateNumber| NumberGen[15-Digit Sequence + Metadata]
    NumberGen -->|buildTrial| TaskSetup[Number Switching Task]
    
    subgraph ExperimentCycle
        TaskSetup -->|initializeTrials| TrialQueue
        TrialQueue -->|getNextDigit| CurrentDigit
        CurrentDigit -->|processResponse| ResponseData
        ResponseData -->|advanceTrial| TrialQueue
    end
    
    ExperimentCycle -->|serveDigit| APIEndpoint
    APIEndpoint -->|collectResponse| ExperimentCycle
