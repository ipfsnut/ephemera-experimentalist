# Ephemera Platform Vision

## Core Architecture

1. Platform Layer (/platform/*)
- Dashboard and experiment discovery
- Global state and session management
- Authentication and user tracking
- Common UI components and styling
- Platform-wide data collection

2. Experiment Framework (/platform/experiments/*)
- Standard experiment lifecycle hooks
- Shared trial management
- Common data collection patterns
- Response validation
- Progress tracking
- Results processing
- Export capabilities

3. Individual Experiments (/platform/experiments/<exp-id>/*)
NST (Number Switching Task) Implementation:
- Inherits platform session management
- Uses framework trial management
- Implements specific:
  - Trial generation
  - Response validation
  - Data collection
  - Results visualization

## API Structure
/api/platform/
- /health - Platform status
- /experiments - List available experiments
- /settings - Global platform settings

/api/experiments/
- /:experimentId/config - Get/update experiment config
- /:experimentId/trials - Trial management
- /:experimentId/results - Results storage and retrieval

## Component Inheritance
Platform -> Experiments -> Individual Experiment
- UI Components cascade down
- State management flows up
- Data collection aggregates upward
- Configuration inherits downward



graph TB
    MarkovChain -->|generateNumber| NumberGen[15-Digit Sequence + Metadata]
    NumberGen -->|buildTrial| TaskSetup[Number Switching Task]
    
    subgraph ExperimentCycle
        TaskSetup -->|initializeTrials| TrialQueue
        TrialQueue -->|getNextDigit| CurrentDigit
        CurrentDigit -->|processResponse| ResponseData
        ResponseData -->|advanceTrial| TrialQueue
    end
    
    ExperimentCycle -->|serveDigit| APIEndpoint
    APIEndpoint -->|collectResponse| ExperimentCycle
